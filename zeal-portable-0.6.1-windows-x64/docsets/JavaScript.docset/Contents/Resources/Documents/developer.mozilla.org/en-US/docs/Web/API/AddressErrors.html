<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/AddressErrors by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Jan 2022 16:50:15 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="https://developer.mozilla.org/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="../../../../../polyfill.io/v3/polyfill.min3a72.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>AddressErrors</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../../../static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><meta name="description" content="The AddressErrors dictionary is used by the Payment Request API to report validation errors in a physical address (typically a billing address or a shipping address). Any members which are present indicate that a validation error occurred for the member of the same name in an address described using PaymentAddress."><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/AddressErrors"><meta property="og:title" content="AddressErrors - Web APIs | MDN"><meta property="og:description" content="The AddressErrors dictionary is used by the Payment Request API to report validation errors in a physical address (typically a billing address or a shipping address). Any members which are present indicate that a validation error occurred for the member of the same name in an address described using PaymentAddress."><meta property="og:locale" content="en-US"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="AddressErrors.html"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="../../../../static/css/main.55b68e13.chunk.css" rel="stylesheet"><script>LUX=(function(){var a=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMarks)?LUX.gaMarks:[]);var d=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMeasures)?LUX.gaMeasures:[]);var j="LUX_start";var k=window.performance;var l=("undefined"!==typeof(LUX)&&LUX.ns?LUX.ns:(Date.now?Date.now():+(new Date())));if(k&&k.timing&&k.timing.navigationStart){l=k.timing.navigationStart}function f(){if(k&&k.now){return k.now()}var o=Date.now?Date.now():+(new Date());return o-l}function b(n){if(k){if(k.mark){return k.mark(n)}else{if(k.webkitMark){return k.webkitMark(n)}}}a.push({name:n,entryType:"mark",startTime:f(),duration:0});return}function m(p,t,n){if("undefined"===typeof(t)&&h(j)){t=j}if(k){if(k.measure){if(t){if(n){return k.measure(p,t,n)}else{return k.measure(p,t)}}else{return k.measure(p)}}else{if(k.webkitMeasure){return k.webkitMeasure(p,t,n)}}}var r=0,o=f();if(t){var s=h(t);if(s){r=s.startTime}else{if(k&&k.timing&&k.timing[t]){r=k.timing[t]-k.timing.navigationStart}else{return}}}if(n){var q=h(n);if(q){o=q.startTime}else{if(k&&k.timing&&k.timing[n]){o=k.timing[n]-k.timing.navigationStart}else{return}}}d.push({name:p,entryType:"measure",startTime:r,duration:(o-r)});return}function h(n){return c(n,g())}function c(p,o){for(i=o.length-1;i>=0;i--){var n=o[i];if(p===n.name){return n}}return undefined}function g(){if(k){if(k.getEntriesByType){return k.getEntriesByType("mark")}else{if(k.webkitGetEntriesByType){return k.webkitGetEntriesByType("mark")}}}return a}return{mark:b,measure:m,gaMarks:a,gaMeasures:d}})();LUX.ns=(Date.now?Date.now():+(new Date()));LUX.ac=[];LUX.cmd=function(a){LUX.ac.push(a)};LUX.init=function(){LUX.cmd(["init"])};LUX.send=function(){LUX.cmd(["send"])};LUX.addData=function(a,b){LUX.cmd(["addData",a,b])};LUX_ae=[];window.addEventListener("error",function(a){LUX_ae.push(a)});LUX_al=[];if("function"===typeof(PerformanceObserver)&&"function"===typeof(PerformanceLongTaskTiming)){var LongTaskObserver=new PerformanceObserver(function(c){var b=c.getEntries();for(var a=0;a<b.length;a++){var d=b[a];LUX_al.push(d)}});try{LongTaskObserver.observe({type:["longtask"]})}catch(e){}};</script><script src="../../../../../cdn.speedcurve.com/js/lux2ff4.js?id=108906238" async="" defer="" crossorigin="anonymous"></script><script defer="" src="../../../../static/js/ga.js"></script><script src="../../../../static/js/runtime-main.742e058d.js" defer=""></script><script src="../../../../static/js/4.a756dea3.chunk.js" defer=""></script><script src="../../../../static/js/main.e0441009.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="../API.html" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Web"><span property="name">Web technology for developers</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="../API.html"><span property="name">Web APIs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="AddressErrors.html"><span property="name">AddressErrors</span></a><meta property="position" content="3"></li></ol></nav></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#properties">Properties</a></li><li><a href="#usage_notes">Usage notes</a></li><li><a href="#examples">Examples</a></li><li><a href="#specifications">Specifications</a></li><li><a href="#browser_compatibility">Browser compatibility</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="en-US"><h1>AddressErrors</h1><div><p>The <strong><code>AddressErrors</code></strong> dictionary is used by the <a href="Payment_Request_API.html">Payment Request API</a> to report validation errors in a physical address (typically a billing address or a shipping address). Any members which are present indicate that a validation error occurred for the member of the same name in an address described using <a href="PaymentAddress.html"><code>PaymentAddress</code></a>.</p>
<p><code>AddressErrors</code> is the type of the object returned by <code>shippingAddressErrors</code> in the object passed into <a href="PaymentRequestUpdateEvent/updateWith.html"><code>PaymentRequestUpdateEvent.updateWith()</code></a> by the <code><a href="PaymentRequest/shippingaddresschange_event.html" title="/en-US/docs/Web/Events/shippingaddresschange">shippingaddresschange</a></code> event handler if a change to the address resulted in a validation error occurring.</p>
<p>See the <a href="#examples">examples below</a> to see how this works.</p></div><a class="dashAnchor" name="//apple_ref/Section/Properties"></a><h2 id="properties"><a href="#properties" title="Permalink to Properties">Properties</a></h2><div><dl>
  <dt><a href="AddressErrors/addressLine.html" title="addressLine"><code>addressLine</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/addressLine.html" title="addressLine"><code>addressLine</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/city.html" title="city"><code>city</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/city.html" title="city"><code>city</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/country.html" title="country"><code>country</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/country.html" title="country"><code>country</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/dependentLocality.html" title="dependentLocality"><code>dependentLocality</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/dependentLocality.html" title="dependentLocality"><code>dependentLocality</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/organization.html" title="organization"><code>organization</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/organization.html" title="organization"><code>organization</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/phone.html" title="phone"><code>phone</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/phone.html" title="phone"><code>phone</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/postalCode.html" title="postalCode"><code>postalCode</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/postalCode.html" title="postalCode"><code>postalCode</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/recipient.html" title="recipient"><code>recipient</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/recipient.html" title="recipient"><code>recipient</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/region.html" title="region"><code>region</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/region.html" title="region"><code>region</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
  <dt><a href="AddressErrors/sortingCode.html" title="sortingCode"><code>sortingCode</code></a></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/sortingCode.html" title="sortingCode"><code>sortingCode</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
</dl></div><h3 id="obsolete_properties"><a href="#obsolete_properties" title="Permalink to Obsolete properties">Obsolete properties</a></h3><div><p>These properties have been removed from the specification and should no longer be used.</p>
<dl>
  <dt><a href="AddressErrors/languageCode.html" title="languageCode"><code>languageCode</code></a> <svg class="icon icon-deprecated" tabindex="0">
    <use xlink:href="../../../../assets/badges.svg#icon-deprecated"></use>
</svg></dt>
  <dd>
    <p>A <a href="DOMString.html"><code>DOMString</code></a> which, if present, indicates that the <a href="PaymentAddress/languageCode.html" title="languageCode"><code>languageCode</code></a> property of the <a href="PaymentAddress.html"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>
  </dd>
</dl></div><a class="dashAnchor" name="//apple_ref/Section/Usage%20notes"></a><h2 id="usage_notes"><a href="#usage_notes" title="Permalink to Usage notes">Usage notes</a></h2><div><p>Keep in mind that some violation errors may be outside the ability of the user to fix. Try to avoid asking the user to make corrections to things they can't change, and there may be situations in which you need to allow validation errors to be accepted anyway (for example, if you validate addresses against a postal service database and a new home has been built and its address is not yet in the database).</p></div><a class="dashAnchor" name="//apple_ref/Section/Examples"></a><h2 id="examples"><a href="#examples" title="Permalink to Examples">Examples</a></h2><div></div><h3 id="snippet_limiting_destination_countries"><a href="#snippet_limiting_destination_countries" title="Permalink to Snippet: Limiting destination countries">Snippet: Limiting destination countries</a></h3><div><p>This first example is just a snippet showing an implementation of the event handler for the <code><a href="PaymentRequest/shippingaddresschange_event.html" title="/en-US/docs/Web/Events/shippingaddresschange">shippingaddresschange</a></code> event which checks to be sure the chosen address is located within one of a limited number of countries.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">handleAddressChange</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> validCountries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"US"</span><span class="token punctuation">,</span> <span class="token string">"CA"</span><span class="token punctuation">,</span> <span class="token string">"GB"</span><span class="token punctuation">,</span> <span class="token string">"JP"</span><span class="token punctuation">,</span> <span class="token string">"CN"</span><span class="token punctuation">,</span> <span class="token string">"MX"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> genericAddressError <span class="token operator">=</span> <span class="token string">"Unable to ship to the given address. Please check for any errors."</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> invalidCountryError <span class="token operator">=</span> <span class="token string">"At this time, we only ship to the United States, Canada, Great Britain, Japan, China, and Germany."</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> shippingAddress <span class="token operator">=</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>shippingAddress<span class="token punctuation">;</span>
  <span class="token keyword">let</span> shippingAddressErrors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> updateDetails <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>validCountries<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>shippingAddress<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>shippingOptions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    shippingAddressErrors<span class="token punctuation">.</span>country <span class="token operator">=</span> invalidCountryError<span class="token punctuation">;</span>

    updateDetails <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">error</span><span class="token operator">:</span> genericAddressError<span class="token punctuation">,</span>
      shippingAddressErrors<span class="token punctuation">,</span>
      <span class="token operator">...</span>defaultPaymentDetails
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  ev<span class="token punctuation">.</span><span class="token function">updateWith</span><span class="token punctuation">(</span>updateDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>See <a href="#handling_address_changes">Handling address changes</a> for a description of how this code works.</p></div><h3 id="complete_example"><a href="#complete_example" title="Permalink to Complete example">Complete example</a></h3><div><p>Here we'll see a complete, working version of the example above (except of course that it's not connected to an actual payment handler, so no payments are actually processed). In the example, we're handling a donation to an organization that will be sending a "thank you" gift to the donor, so it requests shipping information along with allowing the donation payment itself.</p>
<h4 id="javascript">JavaScript</h4>
<h5 id="payment_request_data">Payment Request data</h5>
<p>First, we declare the variables <code>supportedHandlers</code>, which is compatible with <a class="page-not-created" title="The documentation about this has not yet been written; please consider contributing!"><code>PaymentMethodData</code></a>, and <code>defaultPaymentDetails</code>, which is an object containing the properties described in <a href="PaymentRequestUpdateEvent/updateWith.html"><code>PaymentRequestUpdateEvent.updateWith</code></a>.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">let</span> supportedHandlers <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">supportedMethods</span><span class="token operator">:</span> <span class="token string">"https://example.com/pay"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> defaultPaymentDetails <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">total</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'Donation'</span><span class="token punctuation">,</span> <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">'USD'</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'65.00'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">displayItems</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'Original donation amount'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">'USD'</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'65.00'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">shippingOptions</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'standard'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'Standard shipping'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">amount</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">'USD'</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'0.00'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">selected</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p><code>supportedHandlers</code> describes the supported payment handlers and the details for those. In this example, only the Example Pay payment handler is supported.</p>
<p><code>defaultPaymentDetails</code> describes the payment being requested. A description of the total amount being requested (including a label and the currency used), a list of the line items (in this case only one, "Original donation amount"), and a list of shipping options available; in this case only one.</p>
<h5 id="process_the_payment">Process the payment</h5>
<p>The main payment processing code is found in the <code>process()</code> method, up next.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">let</span> request<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">requestShipping</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PaymentRequest</span><span class="token punctuation">(</span>supportedHandlers<span class="token punctuation">,</span> defaultPaymentDetails<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Add event listeners here.</span>
    request<span class="token punctuation">.</span>onshippingaddresschange <span class="token operator">=</span> handleAddressChange<span class="token punctuation">;</span>
    <span class="token comment">// Call show() to trigger the browser's payment flow.</span>
    request<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">instrumentResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Do something with the response from the UI.</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Got response!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Do something with the error from request.show().</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error from show(): </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Catch any errors from trying to create the PaymentRequest object.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This code creates a new <a href="PaymentRequest.html"><code>PaymentRequest</code></a>, providing the supported handlers and payment options we set up above, as well as additional options (in this case, that we want to ask for shipping information).</p>
<p>After that, we set up the handler for the <code><a href="PaymentRequest/shippingaddresschange_event.html" title="/en-US/docs/Web/Events/shippingaddresschange">shippingaddresschange</a></code> event so we can validate address information and call the request's <a href="PaymentRequest/show.html" title="show()"><code>show()</code></a> method to start running the payment UI.</p>
<h5 id="handling_address_changes">Handling address changes</h5>
<p>The <code>handleAddressChange()</code> method, called when <code>shippingaddresschange</code> events occur, is where we'll look to see if the country is one of those we allow as shipping destinations.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">handleAddressChange</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> validCountries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"US"</span><span class="token punctuation">,</span> <span class="token string">"CA"</span><span class="token punctuation">,</span> <span class="token string">"GB"</span><span class="token punctuation">,</span> <span class="token string">"JP"</span><span class="token punctuation">,</span> <span class="token string">"CN"</span><span class="token punctuation">,</span> <span class="token string">"MX"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> genericAddressError <span class="token operator">=</span> <span class="token string">"Unable to ship to the given address. Please check for any errors."</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> invalidCountryError <span class="token operator">=</span> <span class="token string">"At this time, we only ship to the United States, Canada, Great Britain, Japan, China, and Germany."</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> shippingAddress <span class="token operator">=</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>shippingAddress<span class="token punctuation">;</span>
  <span class="token keyword">let</span> shippingAddressErrors <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> updateDetails <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>validCountries<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>shippingAddress<span class="token punctuation">.</span>country<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ev<span class="token punctuation">.</span>target<span class="token punctuation">.</span>shippingOptions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    shippingAddressErrors<span class="token punctuation">.</span>country <span class="token operator">=</span> invalidCountryError<span class="token punctuation">;</span>

    updateDetails <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">error</span><span class="token operator">:</span> genericAddressError<span class="token punctuation">,</span>
      shippingAddressErrors<span class="token punctuation">,</span>
      <span class="token operator">...</span>defaultPaymentDetails
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  ev<span class="token punctuation">.</span><span class="token function">updateWith</span><span class="token punctuation">(</span>updateDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The <code>shippingaddresschange</code> event doesn't receive the <a href="PaymentRequest.html"><code>PaymentRequest</code></a> object directly, so we fetch it from the <a href="Event/target.html" title="target"><code>target</code></a> property of the event. If the request's <a href="PaymentRequest/shippingAddress.html" title="shippingAddress"><code>shippingAddress</code></a> has a value for <a href="PaymentAddress/country.html" title="country"><code>country</code></a> which isn't in the array <code>validCountries</code>, we generate the error.</p>
<p>That's done by removing all shipping options currently set on the request, then set up an object named <code>shippingAddressErrors</code> which contains a <code>country</code> property which is an error message describing why the stated country isn't being permitted as a value.</p>
<p>Then an object is created with its <code>error</code> set to a generic message about address errors and with the reset of the object's values taken from <code>shippingAddressErrors</code>, and, using "<code>...defaultPaymentDetails</code>" as the final entry in the object, the remainder of the properties' values are taken from <code>defaultPaymentDetails</code>.</p>
<p>The final step is to call the event's <a href="PaymentRequestUpdateEvent/updateWith.html" title="updateWith()"><code>updateWith()</code></a> method, passing along the <code>updateDetails</code> object. This lets the Payment Request API know to present the specified error or errors but to allow the user to keep trying to edit the address.</p>
<h5 id="setting_up_the_donate_now_button">Setting up the Donate Now button</h5>
<p>This code creates a handler for the <code><a href="Window/load_event.html" title="/en-US/docs/Web/Events/load">load</a></code> event on the <a href="Window.html" title="window"><code>window</code></a> which in turn adds the needed <code><a href="Element/click_event.html" title="/en-US/docs/Web/Events/click">click</a></code> event handler to the "Donate Now" button so that clicking it starts the payment process.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"pay"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> process<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>See <a href="EventTarget/addEventListener.html" title="addEventListener()"><code>addEventListener()</code></a>&nbsp; for information about event handlers and how they work.</p>
<h4 id="html">HTML</h4>
<p>Here's the simple HTML for this example.</p>
<div class="code-example"><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Donate US $65 to our worthwhile cause and we will send you a totally
not-useless gift as a token of our thanks!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pay<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Donate Now<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<h4 id="result">Result</h4>
<p>The final product is below.</p>
<div class="notecard note">
  <p><strong>Note:</strong> if you have content blocking features enabled in your browser, the example may not work inline below. In that case, you can <a href="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/AddressErrors/_sample_.Complete_example.html" class="external" rel=" noopener">view the example on its own page</a>.</p>
</div><iframe class="sample-code-frame" title="Complete example sample" id="frame_Complete_example" width="640" height="400" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/AddressErrors/_sample_.Complete_example.html" loading="lazy"></iframe></div><a class="dashAnchor" name="//apple_ref/Section/Specifications"></a><h2 id="specifications"><a href="#specifications" title="Permalink to Specifications">Specifications</a></h2><div class="notecard warning"><h4>No specification found</h4><p>No specification data found for <code>api.AddressErrors</code>.<br><a href="#on-github">Check for problems with this page</a> or contribute a missing <code>spec_url</code> to<!-- --> <a href="https://github.com/mdn/browser-compat-data">mdn/browser-compat-data</a>. Also make sure the specification is included in<!-- --> <a href="https://github.com/w3c/browser-specs">w3c/browser-specs</a>.</p></div><a class="dashAnchor" name="//apple_ref/Section/Browser%20compatibility"></a><h2 id="browser_compatibility"><a href="#browser_compatibility" title="Permalink to Browser compatibility">Browser compatibility</a></h2><div class="notecard warning"><p>No compatibility data found for <code>api.AddressErrors</code>.<br><a href="#on-github">Check for problems with this page</a> or contribute missing data to<!-- --> <a href="https://github.com/mdn/browser-compat-data">mdn/browser-compat-data</a>.</p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/addresserrors/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/addresserrors/index.md" title="Folder: en-us/web/api/addresserrors (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FAddressErrors%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Faddresserrors%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FAddressErrors%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Faddresserrors%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2F3df7a2252fc9d496889078c7d23553c434888c10%0A*+Document+last+modified%3A+2021-10-29T15%3A07%3A08.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22AddressErrors%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2CContent%3AWebAPI" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2021-10-29T15:07:08.000Z">Oct 29, 2021</time>,<!-- --> <a href="AddressErrors/contributors.txt">by MDN contributors</a></p></div></aside><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Web/API/AddressErrors">AddressErrors</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/AddressErrors$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div><ol><li><strong><a href="Payment_Request_API.html">Payment Request API</a></strong></li><li><strong><a href="AddressErrors.html"><code>AddressErrors</code></a></strong></li><li class="toggle"><details open=""><summary>Properties</summary><ol><li><a href="AddressErrors/addressLine.html"><code>addressLine</code></a></li><li><a href="AddressErrors/city.html"><code>city</code></a></li><li><a href="AddressErrors/country.html"><code>country</code></a></li><li><a href="AddressErrors/dependentLocality.html"><code>dependentLocality</code></a></li><li><svg class="icon icon-deprecated" tabindex="0">
    <use xlink:href="../../../../assets/badges.svg#icon-deprecated"></use>
</svg><a href="AddressErrors/languageCode.html"><code>languageCode</code></a></li><li><a href="AddressErrors/organization.html"><code>organization</code></a></li><li><a href="AddressErrors/phone.html"><code>phone</code></a></li><li><a href="AddressErrors/postalCode.html"><code>postalCode</code></a></li><li><a href="AddressErrors/recipient.html"><code>recipient</code></a></li><li><a href="AddressErrors/region.html"><code>region</code></a></li><li><a href="AddressErrors/sortingCode.html"><code>sortingCode</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Related pages for Payment Request API</summary><ol><li><a href="HTMLIFrameElement/allowPaymentRequest.html"><code>HTMLIFrameElement.allowPaymentRequest</code></a></li><li><a href="MerchantValidationEvent.html"><code>MerchantValidationEvent</code></a></li><li><a href="PaymentAddress.html"><code>PaymentAddress</code></a></li><li><a href="PaymentMethodChangeEvent.html"><code>PaymentMethodChangeEvent</code></a></li><li><a href="PaymentRequest.html"><code>PaymentRequest</code></a></li><li><a href="PaymentRequestUpdateEvent.html"><code>PaymentRequestUpdateEvent</code></a></li><li><a href="PaymentResponse.html"><code>PaymentResponse</code></a></li></ol></details></li></ol></div></nav></div><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"AddressErrors","mdn_url":"/en-US/docs/Web/API/AddressErrors","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Payment_Request_API\">Payment Request API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/AddressErrors\"><code>AddressErrors</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/AddressErrors/addressLine\"><code>addressLine</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/city\"><code>city</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/country\"><code>country</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/dependentLocality\"><code>dependentLocality</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/API/AddressErrors/languageCode\"><code>languageCode</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/organization\"><code>organization</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/phone\"><code>phone</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/postalCode\"><code>postalCode</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/recipient\"><code>recipient</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/region\"><code>region</code></a></li><li><a href=\"/en-US/docs/Web/API/AddressErrors/sortingCode\"><code>sortingCode</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Payment Request API</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLIFrameElement/allowPaymentRequest\"><code>HTMLIFrameElement.allowPaymentRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/MerchantValidationEvent\"><code>MerchantValidationEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentMethodChangeEvent\"><code>PaymentMethodChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentRequestUpdateEvent\"><code>PaymentRequestUpdateEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/PaymentResponse\"><code>PaymentResponse</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong><code>AddressErrors</code></strong> dictionary is used by the <a href=\"/en-US/docs/Web/API/Payment_Request_API\">Payment Request API</a> to report validation errors in a physical address (typically a billing address or a shipping address). Any members which are present indicate that a validation error occurred for the member of the same name in an address described using <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a>.</p>\n<p><code>AddressErrors</code> is the type of the object returned by <code>shippingAddressErrors</code> in the object passed into <a href=\"/en-US/docs/Web/API/PaymentRequestUpdateEvent/updateWith\"><code>PaymentRequestUpdateEvent.updateWith()</code></a> by the <code><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingaddresschange_event\" title=\"/en-US/docs/Web/Events/shippingaddresschange\">shippingaddresschange</a></code> event handler if a change to the address resulted in a validation error occurring.</p>\n<p>See the <a href=\"#examples\">examples below</a> to see how this works.</p>"}},{"type":"prose","value":{"id":"Properties","title":"Properties","isH3":false,"content":"<dl>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/addressLine\" title=\"addressLine\"><code>addressLine</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/addressLine\" title=\"addressLine\"><code>addressLine</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/city\" title=\"city\"><code>city</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/city\" title=\"city\"><code>city</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/country\" title=\"country\"><code>country</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/country\" title=\"country\"><code>country</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/dependentLocality\" title=\"dependentLocality\"><code>dependentLocality</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/dependentLocality\" title=\"dependentLocality\"><code>dependentLocality</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/organization\" title=\"organization\"><code>organization</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/organization\" title=\"organization\"><code>organization</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/phone\" title=\"phone\"><code>phone</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/phone\" title=\"phone\"><code>phone</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/postalCode\" title=\"postalCode\"><code>postalCode</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/postalCode\" title=\"postalCode\"><code>postalCode</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/recipient\" title=\"recipient\"><code>recipient</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/recipient\" title=\"recipient\"><code>recipient</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/region\" title=\"region\"><code>region</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/region\" title=\"region\"><code>region</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/sortingCode\" title=\"sortingCode\"><code>sortingCode</code></a></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/sortingCode\" title=\"sortingCode\"><code>sortingCode</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"Obsolete_properties","title":"Obsolete properties","isH3":true,"content":"<p>These properties have been removed from the specification and should no longer be used.</p>\n<dl>\n  <dt><a href=\"/en-US/docs/Web/API/AddressErrors/languageCode\" title=\"languageCode\"><code>languageCode</code></a> <svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg></dt>\n  <dd>\n    <p>A <a href=\"/en-US/docs/Web/API/DOMString\"><code>DOMString</code></a> which, if present, indicates that the <a href=\"/en-US/docs/Web/API/PaymentAddress/languageCode\" title=\"languageCode\"><code>languageCode</code></a> property of the <a href=\"/en-US/docs/Web/API/PaymentAddress\"><code>PaymentAddress</code></a> could not be validated. The contents of the string provide a human-readable explanation of the validation failure, and ideally suggestions to correct the problem.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"Usage_notes","title":"Usage notes","isH3":false,"content":"<p>Keep in mind that some violation errors may be outside the ability of the user to fix. Try to avoid asking the user to make corrections to things they can't change, and there may be situations in which you need to allow validation errors to be accepted anyway (for example, if you validate addresses against a postal service database and a new home has been built and its address is not yet in the database).</p>"}},{"type":"prose","value":{"id":"Examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"Snippet_Limiting_destination_countries","title":"Snippet: Limiting destination countries","isH3":true,"content":"<p>This first example is just a snippet showing an implementation of the event handler for the <code><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingaddresschange_event\" title=\"/en-US/docs/Web/Events/shippingaddresschange\">shippingaddresschange</a></code> event which checks to be sure the chosen address is located within one of a limited number of countries.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">handleAddressChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> validCountries <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"US\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"GB\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"JP\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CN\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"MX\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> genericAddressError <span class=\"token operator\">=</span> <span class=\"token string\">\"Unable to ship to the given address. Please check for any errors.\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> invalidCountryError <span class=\"token operator\">=</span> <span class=\"token string\">\"At this time, we only ship to the United States, Canada, Great Britain, Japan, China, and Germany.\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> shippingAddress <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>shippingAddress<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> shippingAddressErrors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> updateDetails <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>validCountries<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>shippingAddress<span class=\"token punctuation\">.</span>country<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>shippingOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    shippingAddressErrors<span class=\"token punctuation\">.</span>country <span class=\"token operator\">=</span> invalidCountryError<span class=\"token punctuation\">;</span>\n\n    updateDetails <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> genericAddressError<span class=\"token punctuation\">,</span>\n      shippingAddressErrors<span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>defaultPaymentDetails\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  ev<span class=\"token punctuation\">.</span><span class=\"token function\">updateWith</span><span class=\"token punctuation\">(</span>updateDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>See <a href=\"#handling_address_changes\">Handling address changes</a> for a description of how this code works.</p>"}},{"type":"prose","value":{"id":"Complete_example","title":"Complete example","isH3":true,"content":"<p>Here we'll see a complete, working version of the example above (except of course that it's not connected to an actual payment handler, so no payments are actually processed). In the example, we're handling a donation to an organization that will be sending a \"thank you\" gift to the donor, so it requests shipping information along with allowing the donation payment itself.</p>\n<h4 id=\"javascript\">JavaScript</h4>\n<h5 id=\"payment_request_data\">Payment Request data</h5>\n<p>First, we declare the variables <code>supportedHandlers</code>, which is compatible with <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>PaymentMethodData</code></a>, and <code>defaultPaymentDetails</code>, which is an object containing the properties described in <a href=\"/en-US/docs/Web/API/PaymentRequestUpdateEvent/updateWith\"><code>PaymentRequestUpdateEvent.updateWith</code></a>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> supportedHandlers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">supportedMethods</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://example.com/pay\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> defaultPaymentDetails <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'Donation'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'65.00'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">displayItems</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'Original donation amount'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'65.00'</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">shippingOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'standard'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">'Standard shipping'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">currency</span><span class=\"token operator\">:</span> <span class=\"token string\">'USD'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'0.00'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">selected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>supportedHandlers</code> describes the supported payment handlers and the details for those. In this example, only the Example Pay payment handler is supported.</p>\n<p><code>defaultPaymentDetails</code> describes the payment being requested. A description of the total amount being requested (including a label and the currency used), a list of the line items (in this case only one, \"Original donation amount\"), and a list of shipping options available; in this case only one.</p>\n<h5 id=\"process_the_payment\">Process the payment</h5>\n<p>The main payment processing code is found in the <code>process()</code> method, up next.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> request<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">process</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">requestShipping</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaymentRequest</span><span class=\"token punctuation\">(</span>supportedHandlers<span class=\"token punctuation\">,</span> defaultPaymentDetails<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Add event listeners here.</span>\n    request<span class=\"token punctuation\">.</span>onshippingaddresschange <span class=\"token operator\">=</span> handleAddressChange<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Call show() to trigger the browser's payment flow.</span>\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">instrumentResponse</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something with the response from the UI.</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got response!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Do something with the error from request.show().</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Error from show(): </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>err<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Catch any errors from trying to create the PaymentRequest object.</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This code creates a new <a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a>, providing the supported handlers and payment options we set up above, as well as additional options (in this case, that we want to ask for shipping information).</p>\n<p>After that, we set up the handler for the <code><a href=\"/en-US/docs/Web/API/PaymentRequest/shippingaddresschange_event\" title=\"/en-US/docs/Web/Events/shippingaddresschange\">shippingaddresschange</a></code> event so we can validate address information and call the request's <a href=\"/en-US/docs/Web/API/PaymentRequest/show\" title=\"show()\"><code>show()</code></a> method to start running the payment UI.</p>\n<h5 id=\"handling_address_changes\">Handling address changes</h5>\n<p>The <code>handleAddressChange()</code> method, called when <code>shippingaddresschange</code> events occur, is where we'll look to see if the country is one of those we allow as shipping destinations.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">handleAddressChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> validCountries <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"US\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CA\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"GB\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"JP\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CN\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"MX\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> genericAddressError <span class=\"token operator\">=</span> <span class=\"token string\">\"Unable to ship to the given address. Please check for any errors.\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> invalidCountryError <span class=\"token operator\">=</span> <span class=\"token string\">\"At this time, we only ship to the United States, Canada, Great Britain, Japan, China, and Germany.\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> shippingAddress <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>shippingAddress<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> shippingAddressErrors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> updateDetails <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>validCountries<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>shippingAddress<span class=\"token punctuation\">.</span>country<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>shippingOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    shippingAddressErrors<span class=\"token punctuation\">.</span>country <span class=\"token operator\">=</span> invalidCountryError<span class=\"token punctuation\">;</span>\n\n    updateDetails <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> genericAddressError<span class=\"token punctuation\">,</span>\n      shippingAddressErrors<span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>defaultPaymentDetails\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  ev<span class=\"token punctuation\">.</span><span class=\"token function\">updateWith</span><span class=\"token punctuation\">(</span>updateDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The <code>shippingaddresschange</code> event doesn't receive the <a href=\"/en-US/docs/Web/API/PaymentRequest\"><code>PaymentRequest</code></a> object directly, so we fetch it from the <a href=\"/en-US/docs/Web/API/Event/target\" title=\"target\"><code>target</code></a> property of the event. If the request's <a href=\"/en-US/docs/Web/API/PaymentRequest/shippingAddress\" title=\"shippingAddress\"><code>shippingAddress</code></a> has a value for <a href=\"/en-US/docs/Web/API/PaymentAddress/country\" title=\"country\"><code>country</code></a> which isn't in the array <code>validCountries</code>, we generate the error.</p>\n<p>That's done by removing all shipping options currently set on the request, then set up an object named <code>shippingAddressErrors</code> which contains a <code>country</code> property which is an error message describing why the stated country isn't being permitted as a value.</p>\n<p>Then an object is created with its <code>error</code> set to a generic message about address errors and with the reset of the object's values taken from <code>shippingAddressErrors</code>, and, using \"<code>...defaultPaymentDetails</code>\" as the final entry in the object, the remainder of the properties' values are taken from <code>defaultPaymentDetails</code>.</p>\n<p>The final step is to call the event's <a href=\"/en-US/docs/Web/API/PaymentRequestUpdateEvent/updateWith\" title=\"updateWith()\"><code>updateWith()</code></a> method, passing along the <code>updateDetails</code> object. This lets the Payment Request API know to present the specified error or errors but to allow the user to keep trying to edit the address.</p>\n<h5 id=\"setting_up_the_donate_now_button\">Setting up the Donate Now button</h5>\n<p>This code creates a handler for the <code><a href=\"/en-US/docs/Web/API/Window/load_event\" title=\"/en-US/docs/Web/Events/load\">load</a></code> event on the <a href=\"/en-US/docs/Web/API/Window\" title=\"window\"><code>window</code></a> which in turn adds the needed <code><a href=\"/en-US/docs/Web/API/Element/click_event\" title=\"/en-US/docs/Web/Events/click\">click</a></code> event handler to the \"Donate Now\" button so that clicking it starts the payment process.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pay\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>See <a href=\"/en-US/docs/Web/API/EventTarget/addEventListener\" title=\"addEventListener()\"><code>addEventListener()</code></a>&nbsp; for information about event handlers and how they work.</p>\n<h4 id=\"html\">HTML</h4>\n<p>Here's the simple HTML for this example.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Donate US $65 to our worthwhile cause and we will send you a totally\nnot-useless gift as a token of our thanks!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pay<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Donate Now<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<h4 id=\"result\">Result</h4>\n<p>The final product is below.</p>\n<div class=\"notecard note\">\n  <p><strong>Note:</strong> if you have content blocking features enabled in your browser, the example may not work inline below. In that case, you can <a href=\"https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/AddressErrors/_sample_.Complete_example.html\" class=\"external\" rel=\" noopener\">view the example on its own page</a>.</p>\n</div><iframe class=\"sample-code-frame\" title=\"Complete example sample\" id=\"frame_Complete_example\" width=\"640\" height=\"400\" src=\"https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/AddressErrors/_sample_.Complete_example.html\" loading=\"lazy\"></iframe>"}},{"type":"specifications","value":{"title":"Specifications","id":"Specifications","isH3":false,"query":"api.AddressErrors","specifications":[]}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"Browser_compatibility","isH3":false,"data":null,"query":"api.AddressErrors","browsers":null}}],"toc":[{"text":"Properties","id":"Properties"},{"text":"Usage notes","id":"Usage_notes"},{"text":"Examples","id":"Examples"},{"text":"Specifications","id":"Specifications"},{"text":"Browser compatibility","id":"Browser_compatibility"}],"summary":"The AddressErrors dictionary is used by the Payment Request API to report validation errors in a physical address (typically a billing address or a shipping address). Any members which are present indicate that a validation error occurred for the member of the same name in an address described using PaymentAddress.","popularity":0,"modified":"2021-10-29T15:07:08.000Z","source":{"folder":"en-us/web/api/addresserrors","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/addresserrors/index.md","last_commit_url":"https://github.com/mdn/content/commit/3df7a2252fc9d496889078c7d23553c434888c10","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/AddressErrors","title":"AddressErrors"}],"pageTitle":"AddressErrors - Web APIs | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/AddressErrors by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Jan 2022 16:50:15 GMT -->
</body></html>