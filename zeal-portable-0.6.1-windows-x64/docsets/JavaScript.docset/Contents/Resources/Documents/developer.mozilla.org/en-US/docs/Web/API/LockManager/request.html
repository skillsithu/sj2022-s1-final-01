<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/LockManager/request by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Jan 2022 17:15:52 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="../../../../../favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="../../../../../apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="https://developer.mozilla.org/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="../../../../../../polyfill.io/v3/polyfill.min3a72.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>LockManager.request()</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="../../../../../static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><meta name="description" content="The request() method of the LockManager interface requests a Lock object with parameters specifying its name and characteristics.
  The requested Lock is passed to a callback, while the function itself returns a Promise that resolves with undefined."><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"><meta property="og:title" content="LockManager.request() - Web APIs | MDN"><meta property="og:description" content="The request() method of the LockManager interface requests a Lock object with parameters specifying its name and characteristics.
  The requested Lock is passed to a callback, while the function itself returns a Promise that resolves with undefined."><meta property="og:locale" content="en-US"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="request.html"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="../../../../../static/css/main.55b68e13.chunk.css" rel="stylesheet"><script>LUX=(function(){var a=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMarks)?LUX.gaMarks:[]);var d=("undefined"!==typeof(LUX)&&"undefined"!==typeof(LUX.gaMeasures)?LUX.gaMeasures:[]);var j="LUX_start";var k=window.performance;var l=("undefined"!==typeof(LUX)&&LUX.ns?LUX.ns:(Date.now?Date.now():+(new Date())));if(k&&k.timing&&k.timing.navigationStart){l=k.timing.navigationStart}function f(){if(k&&k.now){return k.now()}var o=Date.now?Date.now():+(new Date());return o-l}function b(n){if(k){if(k.mark){return k.mark(n)}else{if(k.webkitMark){return k.webkitMark(n)}}}a.push({name:n,entryType:"mark",startTime:f(),duration:0});return}function m(p,t,n){if("undefined"===typeof(t)&&h(j)){t=j}if(k){if(k.measure){if(t){if(n){return k.measure(p,t,n)}else{return k.measure(p,t)}}else{return k.measure(p)}}else{if(k.webkitMeasure){return k.webkitMeasure(p,t,n)}}}var r=0,o=f();if(t){var s=h(t);if(s){r=s.startTime}else{if(k&&k.timing&&k.timing[t]){r=k.timing[t]-k.timing.navigationStart}else{return}}}if(n){var q=h(n);if(q){o=q.startTime}else{if(k&&k.timing&&k.timing[n]){o=k.timing[n]-k.timing.navigationStart}else{return}}}d.push({name:p,entryType:"measure",startTime:r,duration:(o-r)});return}function h(n){return c(n,g())}function c(p,o){for(i=o.length-1;i>=0;i--){var n=o[i];if(p===n.name){return n}}return undefined}function g(){if(k){if(k.getEntriesByType){return k.getEntriesByType("mark")}else{if(k.webkitGetEntriesByType){return k.webkitGetEntriesByType("mark")}}}return a}return{mark:b,measure:m,gaMarks:a,gaMeasures:d}})();LUX.ns=(Date.now?Date.now():+(new Date()));LUX.ac=[];LUX.cmd=function(a){LUX.ac.push(a)};LUX.init=function(){LUX.cmd(["init"])};LUX.send=function(){LUX.cmd(["send"])};LUX.addData=function(a,b){LUX.cmd(["addData",a,b])};LUX_ae=[];window.addEventListener("error",function(a){LUX_ae.push(a)});LUX_al=[];if("function"===typeof(PerformanceObserver)&&"function"===typeof(PerformanceLongTaskTiming)){var LongTaskObserver=new PerformanceObserver(function(c){var b=c.getEntries();for(var a=0;a<b.length;a++){var d=b[a];LUX_al.push(d)}});try{LongTaskObserver.observe({type:["longtask"]})}catch(e){}};</script><script src="../../../../../../cdn.speedcurve.com/js/lux2ff4.js?id=108906238" async="" defer="" crossorigin="anonymous"></script><script defer="" src="../../../../../static/js/ga.js"></script><script src="../../../../../static/js/runtime-main.742e058d.js" defer=""></script><script src="../../../../../static/js/4.a756dea3.chunk.js" defer=""></script><script src="../../../../../static/js/main.e0441009.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="https://developer.mozilla.org/en-US/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="../../API.html" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="https://developer.mozilla.org/en-US/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> üåê</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> üåê</a></li></ul></li></ul></nav><div class="header-search"><form action="https://developer.mozilla.org/en-US/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="https://developer.mozilla.org/en-US/docs/Web"><span property="name">Web technology for developers</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="../../API.html"><span property="name">Web APIs</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="../LockManager.html"><span property="name">LockManager</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="request.html"><span property="name">LockManager.request()</span></a><meta property="position" content="4"></li></ol></nav></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#syntax">Syntax</a></li><li><a href="#examples">Examples</a></li><li><a href="#specifications">Specifications</a></li><li><a href="#browser_compatibility">Browser compatibility</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="en-US"><h1>LockManager.request()</h1><div><div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Guidelines/Conventions_definitions#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div>
<p>
  The <strong><code>request()</code></strong> method of the <a href="../LockManager.html"><code>LockManager</code></a> interface requests a <a href="../Lock.html"><code>Lock</code></a> object with parameters specifying its name and characteristics.
  The requested <code>Lock</code> is passed to a callback, while the function itself returns a <a href="../../JavaScript/Reference/Global_Objects/Promise.html"><code>Promise</code></a> that resolves with <a href="../../JavaScript/Reference/Global_Objects/undefined.html"><code>undefined</code></a>.
</p>
<p>The <code>mode</code> property of the <code>options</code> parameter may be either <code>"exclusive"</code> or <code>"shared"</code>.</p>
<p>
  Request an <code>"exclusive"</code> lock when it should only be held by one code instance at a time.
  This applies to code in both tabs and workers. Use this to represent mutually exclusive access to a resource.
  When an <code>"exclusive"</code> lock for a given name is held, no other lock with the same name can be held.
</p>
<p>
  Request a <code>"shared"</code> lock when multiple instances of the code can share access to a resource.
  When a <code>"shared"</code> lock for a given name is held, other <code>"shared"</code> locks for the same name can be granted, but no <code>"exclusive"</code> locks with that name can be held or granted.
</p>
<p>
  This shared/exclusive lock pattern is common in database transaction architecture, for example to allow multiple simultaneous readers (each requests a <code>"shared"</code> lock) but only one writer (a single <code>"exclusive"</code> lock).
  This is known as the readers-writer pattern.
  In the <a href="../IndexedDB_API.html">IndexedDB API</a>, this is exposed as <code>"readonly"</code> and <code>"readwrite"</code> transactions which have the same semantics.
</p></div><a class="dashAnchor" name="//apple_ref/Section/Syntax"></a><h2 id="syntax"><a href="#syntax" title="Permalink to Syntax">Syntax</a></h2><div><div class="code-example"><pre class="brush: js notranslate"><code>LockManager<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
LockManager<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">{</span>options<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div></div><h3 id="parameters"><a href="#parameters" title="Permalink to Parameters">Parameters</a></h3><div><dl>
  <dt>name</dt>
  <dd>
    <p>An identifier for the lock you want to request.</p>
  </dd>
  <dt>options <span class="badge inline optional">Optional</span></dt>
  <dd>
    <p>
      An object describing characteristics of the lock you want to create.
      Valid values are:
    </p>
    <dl>
      <dt><code>mode</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          Either <code>"exclusive"</code> or <code>"shared"</code>.
          The default value is <code>"exclusive"</code>.
        </p>
      </dd>
      <dt><code>ifAvailable</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          If <code>true</code>, the lock request will only be granted if it is not already held.
          If it cannot be granted, the callback will be invoked with <code>null</code> instead of a <code>Lock</code> instance.
          The default value is <code>false</code>.
        </p>
      </dd>
      <dt><code>steal</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          If <code>true</code>, then any held locks with the same name will be released, and the request will be granted, preempting any queued requests for it.
          The default value is <code>false</code>.
        </p>
        <div class="notecard warning">
          <p>
            <strong>Warning:</strong> Use with care!
            Code that was previously running inside the lock continues to run, and may clash with the code that now holds the lock.
          </p>
        </div>
      </dd>
      <dt><code>signal</code> <span class="badge inline optional">Optional</span></dt>
      <dd>
        <p>
          An <code>AbortSignal</code> (the <code>signal</code> property of an <code>AbortController</code>);
          if specified and the <code>AbortController</code> is aborted, the lock request is dropped if it was not already granted.
        </p>
      </dd>
    </dl>
  </dd>
  <dt>callback</dt>
  <dd>
    <p>
      Method called when the lock is granted.
      The lock is automatically released when the callback returns (or an exception is thrown).
      Usually the callback is an async function, which causes the lock to be released only when the async function has completely finished.
    </p>
  </dd>
</dl></div><h3 id="return_value"><a href="#return_value" title="Permalink to Return value">Return value</a></h3><div><p>A <a href="../../JavaScript/Reference/Global_Objects/Promise.html"><code>Promise</code></a> that resolves with <code>undefined</code> when the request is granted.</p></div><h3 id="exceptions"><a href="#exceptions" title="Permalink to Exceptions">Exceptions</a></h3><div><p>This method may return a promise rejected with a <a href="../DOMException.html"><code>DOMException</code></a> of one of the following types:</p>
<dl>
  <dt><code>InvalidStateError</code> <a href="../DOMException.html"><code>DOMException</code></a></dt>
  <dd>
    <p>If the environments document is not fully active.</p>
  </dd>
  <dt><code>SecurityError</code> <a href="../DOMException.html"><code>DOMException</code></a></dt>
  <dd>
    <p>If a lock manager cannot be obtained for the current environment.</p>
  </dd>
  <dt><code>NotSupportedError</code> <a href="../DOMException.html"><code>DOMException</code></a></dt>
  <dd>
    <p>If <code>names</code> starts with a hyphen (<code>-</code>), both options <code>steal</code> and <code>ifAvailable</code> are <code>true</code>, or if option <code>signal</code> exists and <em>either</em> option <code>steal</code> or <code>ifAvailable</code> is <code>true</code>.</p>
  </dd>
  <dt><code>AbortError</code> <a href="../DOMException.html"><code>DOMException</code></a></dt>
  <dd>
    <p>If the option <code>signal</code> exists and is aborted.</p>
  </dd>
</dl></div><a class="dashAnchor" name="//apple_ref/Section/Examples"></a><h2 id="examples"><a href="#examples" title="Permalink to Examples">Examples</a></h2><div></div><h3 id="general_example"><a href="#general_example" title="Permalink to General Example">General Example</a></h3><div><p>
  The following example shows the basic use of the <code>request()</code> method with an asynchronous function as the callback.
  Once the callback is invoked, no other running code on this origin can hold <code>my_resource</code> until the callback returns.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">await</span> navigator<span class="token punctuation">.</span>locks<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'my_resource'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">lock</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// The lock was granted.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h3 id="mode_example"><a href="#mode_example" title="Permalink to Mode Example">Mode Example</a></h3><div><p>The following example shows how to use the <code>mode</code> option for readers and writers.</p>
<p>
  Notice that both functions use a lock called <code>my_resource</code>.
  The <code>do_read()</code> requests a lock in <code>'shared'</code> mode meaning that multiple calls may occur simultaneously across different event handlers, tabs, or workers.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">do_read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>locks<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'my_resource'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'shared'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">lock</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Read code here.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>
  The <code>do_write()</code> function use the same lock but in <code>'exclusive'</code> mode which will delay invocation of the <code>request()</code> call in <code>do_read()</code> until the write operation has completed.
  This applies across event handlers, tabs, or workers.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">do_write</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>locks<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'my_resource'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'exclusive'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">lock</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Write code here.</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h3 id="ifavailable_example"><a href="#ifavailable_example" title="Permalink to ifAvailable Example">ifAvailable Example</a></h3><div><p>
  To grab a lock only if it isn't already being held, use the <code>ifAvailable</code> option.
  In this function <code>await</code> means the method will not return until the callback is complete.
  Since the lock is only granted if it was available, this call avoids needing to wait on the lock being released elsewhere.
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">await</span> navigator<span class="token punctuation">.</span>locks<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'my_resource'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">ifAvailable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">lock</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The lock was not granted - get out fast.</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// The lock was granted, and no other running code in this origin is holding</span>
  <span class="token comment">// the 'my_res_lock' lock until this returns.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h3 id="signal_example"><a href="#signal_example" title="Permalink to signal Example">signal Example</a></h3><div><p>To only wait for a lock for a short period of time, use the <code>signal</code> option.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Wait at most 200ms.</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>locks<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'my_resource'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">lock</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// The lock was acquired!</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'AbortError'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The request aborted before it could be granted.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><a class="dashAnchor" name="//apple_ref/Section/Specifications"></a><h2 id="specifications"><a href="#specifications" title="Permalink to Specifications">Specifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://w3c.github.io/web-locks/#api-lock-manager-request">Web Locks API<!-- --> <br><small># <!-- -->api-lock-manager-request</small></a></td></tr></tbody></table><a class="dashAnchor" name="//apple_ref/Section/Browser%20compatibility"></a><h2 id="browser_compatibility"><a href="#browser_compatibility" title="Permalink to Browser compatibility">Browser compatibility</a></h2><table class="bc-table bc-table-web"><thead><tr class="bc-platforms"><td></td><th class="bc-platform-desktop" colspan="6" title="desktop"><span>desktop</span></th><th class="bc-platform-mobile" colspan="6" title="mobile"><span>mobile</span></th></tr><tr class="bc-browsers"><td></td><th class="bc-browser-chrome"><span class="bc-head-txt-label bc-head-icon-chrome">Chrome</span></th><th class="bc-browser-edge"><span class="bc-head-txt-label bc-head-icon-edge">Edge</span></th><th class="bc-browser-firefox"><span class="bc-head-txt-label bc-head-icon-firefox">Firefox</span></th><th class="bc-browser-ie"><span class="bc-head-txt-label bc-head-icon-ie">Internet Explorer</span></th><th class="bc-browser-opera"><span class="bc-head-txt-label bc-head-icon-opera">Opera</span></th><th class="bc-browser-safari"><span class="bc-head-txt-label bc-head-icon-safari">Safari</span></th><th class="bc-browser-webview_android"><span class="bc-head-txt-label bc-head-icon-webview_android">WebView Android</span></th><th class="bc-browser-chrome_android"><span class="bc-head-txt-label bc-head-icon-chrome_android">Chrome Android</span></th><th class="bc-browser-firefox_android"><span class="bc-head-txt-label bc-head-icon-firefox_android">Firefox for Android</span></th><th class="bc-browser-opera_android"><span class="bc-head-txt-label bc-head-icon-opera_android">Opera Android</span></th><th class="bc-browser-safari_ios"><span class="bc-head-txt-label bc-head-icon-safari_ios">Safari on iOS</span></th><th class="bc-browser-samsunginternet_android"><span class="bc-head-txt-label bc-head-icon-samsunginternet_android">Samsung Internet</span></th></tr></thead><tbody><tr><th scope="row"><div class="bc-table-row-header"><code>request</code></div></th><td class="bc-browser-chrome bc-supports-yes " aria-expanded="false" title="Released 2018-09-04"><span class="bc-browser-name">Chrome</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>69</span><div class="bc-icons"></div></td><td class="bc-browser-edge bc-supports-yes " aria-expanded="false" title="Released 2020-01-15"><span class="bc-browser-name">Edge</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>79</span><div class="bc-icons"></div></td><td class="bc-browser-firefox bc-supports-yes bc-has-history" aria-expanded="false" tabindex="0" title="Released 2022-01-11"><span class="bc-browser-name">Firefox</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>96</span><div class="bc-icons"></div><button type="button" title="Open implementation notes" class="bc-history-link only-icon "><span>Open</span><i class="ic-history" aria-hidden="true"></i></button></td><td class="bc-browser-ie bc-supports-no " aria-expanded="false"><span class="bc-browser-name">Internet Explorer</span><abbr class="bc-level-no only-icon" title="No support"><span>No support</span></abbr><span>No</span><div class="bc-icons"></div></td><td class="bc-browser-opera bc-supports-yes " aria-expanded="false" title="Released 2018-09-25"><span class="bc-browser-name">Opera</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>56</span><div class="bc-icons"></div></td><td class="bc-browser-safari bc-supports-preview " aria-expanded="false"><span class="bc-browser-name">Safari</span><abbr class="bc-level-preview only-icon" title="Preview browser support"><span>Preview browser support</span></abbr><span>TP</span><div class="bc-icons"></div></td><td class="bc-browser-webview_android bc-supports-yes " aria-expanded="false" title="Released 2018-09-04"><span class="bc-browser-name">WebView Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>69</span><div class="bc-icons"></div></td><td class="bc-browser-chrome_android bc-supports-yes " aria-expanded="false" title="Released 2018-09-04"><span class="bc-browser-name">Chrome Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>69</span><div class="bc-icons"></div></td><td class="bc-browser-firefox_android bc-supports-yes " aria-expanded="false" title="Released 2022-01-11"><span class="bc-browser-name">Firefox for Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>96</span><div class="bc-icons"></div></td><td class="bc-browser-opera_android bc-supports-yes " aria-expanded="false" title="Released 2018-11-08"><span class="bc-browser-name">Opera Android</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>48</span><div class="bc-icons"></div></td><td class="bc-browser-safari_ios bc-supports-no " aria-expanded="false"><span class="bc-browser-name">Safari on iOS</span><abbr class="bc-level-no only-icon" title="No support"><span>No support</span></abbr><span>No</span><div class="bc-icons"></div></td><td class="bc-browser-samsunginternet_android bc-supports-yes " aria-expanded="false" title="Released 2019-08-22"><span class="bc-browser-name">Samsung Internet</span><abbr class="bc-level-yes only-icon" title="Full support"><span>Full support</span></abbr><span>10.0</span><div class="bc-icons"></div></td></tr></tbody></table></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/content/edit/main/files/en-us/web/api/lockmanager/request/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/content/blob/main/files/en-us/web/api/lockmanager/request/index.md" title="Folder: en-us/web/api/lockmanager/request (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FLockManager%2Frequest%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60en-us%2Fweb%2Fapi%2Flockmanager%2Frequest%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FLockManager%2Frequest%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fblob%2Fmain%2Ffiles%2Fen-us%2Fweb%2Fapi%2Flockmanager%2Frequest%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Fcontent%2Fcommit%2Ff1fc79652a89d34a311948238580f2459f0e357d%0A*+Document+last+modified%3A+2022-01-22T00%3A33%3A01.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22LockManager.request%28%29%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2CContent%3AWebAPI" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-01-22T00:33:01.000Z">Jan 22, 2022</time>,<!-- --> <a href="request/contributors.txt">by MDN contributors</a></p></div></aside><footer id="nav-footer" class="page-footer"><div><a href="http://developer.mozilla.org/en-US/docs/Web/API/LockManager/request">LockManager.request()</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/LockManager/request$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/">CC-BY-SA 2.5</a>.</div></footer></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div><ol><li><strong><a href="../LockManager.html"><code>LockManager</code></a></strong></li><li class="toggle"><details open=""><summary>Methods</summary><ol><li><svg class="icon icon-experimental" tabindex="0">
    <use xlink:href="../../../../../assets/badges.svg#icon-experimental"></use>
</svg><a href="query.html"><code>query()</code></a></li><li><svg class="icon icon-experimental" tabindex="0">
    <use xlink:href="../../../../../assets/badges.svg#icon-experimental"></use>
</svg><em><code>request()</code></em></li></ol></details></li></ol></div></nav></div><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"LockManager.request()","mdn_url":"/en-US/docs/Web/API/LockManager/request","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/LockManager\"><code>LockManager</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/LockManager/query\"><code>query()</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><em><code>request()</code></em></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Guidelines/Conventions_definitions#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>\n  The <strong><code>request()</code></strong> method of the <a href=\"/en-US/docs/Web/API/LockManager\"><code>LockManager</code></a> interface requests a <a href=\"/en-US/docs/Web/API/Lock\"><code>Lock</code></a> object with parameters specifying its name and characteristics.\n  The requested <code>Lock</code> is passed to a callback, while the function itself returns a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined\"><code>undefined</code></a>.\n</p>\n<p>The <code>mode</code> property of the <code>options</code> parameter may be either <code>\"exclusive\"</code> or <code>\"shared\"</code>.</p>\n<p>\n  Request an <code>\"exclusive\"</code> lock when it should only be held by one code instance at a time.\n  This applies to code in both tabs and workers. Use this to represent mutually exclusive access to a resource.\n  When an <code>\"exclusive\"</code> lock for a given name is held, no other lock with the same name can be held.\n</p>\n<p>\n  Request a <code>\"shared\"</code> lock when multiple instances of the code can share access to a resource.\n  When a <code>\"shared\"</code> lock for a given name is held, other <code>\"shared\"</code> locks for the same name can be granted, but no <code>\"exclusive\"</code> locks with that name can be held or granted.\n</p>\n<p>\n  This shared/exclusive lock pattern is common in database transaction architecture, for example to allow multiple simultaneous readers (each requests a <code>\"shared\"</code> lock) but only one writer (a single <code>\"exclusive\"</code> lock).\n  This is known as the readers-writer pattern.\n  In the <a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB API</a>, this is exposed as <code>\"readonly\"</code> and <code>\"readwrite\"</code> transactions which have the same semantics.\n</p>"}},{"type":"prose","value":{"id":"Syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>LockManager<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\nLockManager<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>options<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"Parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt>name</dt>\n  <dd>\n    <p>An identifier for the lock you want to request.</p>\n  </dd>\n  <dt>options <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>\n      An object describing characteristics of the lock you want to create.\n      Valid values are:\n    </p>\n    <dl>\n      <dt><code>mode</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          Either <code>\"exclusive\"</code> or <code>\"shared\"</code>.\n          The default value is <code>\"exclusive\"</code>.\n        </p>\n      </dd>\n      <dt><code>ifAvailable</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          If <code>true</code>, the lock request will only be granted if it is not already held.\n          If it cannot be granted, the callback will be invoked with <code>null</code> instead of a <code>Lock</code> instance.\n          The default value is <code>false</code>.\n        </p>\n      </dd>\n      <dt><code>steal</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          If <code>true</code>, then any held locks with the same name will be released, and the request will be granted, preempting any queued requests for it.\n          The default value is <code>false</code>.\n        </p>\n        <div class=\"notecard warning\">\n          <p>\n            <strong>Warning:</strong> Use with care!\n            Code that was previously running inside the lock continues to run, and may clash with the code that now holds the lock.\n          </p>\n        </div>\n      </dd>\n      <dt><code>signal</code> <span class=\"badge inline optional\">Optional</span></dt>\n      <dd>\n        <p>\n          An <code>AbortSignal</code> (the <code>signal</code> property of an <code>AbortController</code>);\n          if specified and the <code>AbortController</code> is aborted, the lock request is dropped if it was not already granted.\n        </p>\n      </dd>\n    </dl>\n  </dd>\n  <dt>callback</dt>\n  <dd>\n    <p>\n      Method called when the lock is granted.\n      The lock is automatically released when the callback returns (or an exception is thrown).\n      Usually the callback is an async function, which causes the lock to be released only when the async function has completely finished.\n    </p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"Return_value","title":"Return value","isH3":true,"content":"<p>A <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> that resolves with <code>undefined</code> when the request is granted.</p>"}},{"type":"prose","value":{"id":"Exceptions","title":"Exceptions","isH3":true,"content":"<p>This method may return a promise rejected with a <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a> of one of the following types:</p>\n<dl>\n  <dt><code>InvalidStateError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>If the environments document is not fully active.</p>\n  </dd>\n  <dt><code>SecurityError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>If a lock manager cannot be obtained for the current environment.</p>\n  </dd>\n  <dt><code>NotSupportedError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>If <code>names</code> starts with a hyphen (<code>-</code>), both options <code>steal</code> and <code>ifAvailable</code> are <code>true</code>, or if option <code>signal</code> exists and <em>either</em> option <code>steal</code> or <code>ifAvailable</code> is <code>true</code>.</p>\n  </dd>\n  <dt><code>AbortError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>If the option <code>signal</code> exists and is aborted.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"Examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"General_Example","title":"General Example","isH3":true,"content":"<p>\n  The following example shows the basic use of the <code>request()</code> method with an asynchronous function as the callback.\n  Once the callback is invoked, no other running code on this origin can hold <code>my_resource</code> until the callback returns.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my_resource'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">lock</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// The lock was granted.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"Mode_Example","title":"Mode Example","isH3":true,"content":"<p>The following example shows how to use the <code>mode</code> option for readers and writers.</p>\n<p>\n  Notice that both functions use a lock called <code>my_resource</code>.\n  The <code>do_read()</code> requests a lock in <code>'shared'</code> mode meaning that multiple calls may occur simultaneously across different event handlers, tabs, or workers.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">do_read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my_resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'shared'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">lock</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Read code here.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  The <code>do_write()</code> function use the same lock but in <code>'exclusive'</code> mode which will delay invocation of the <code>request()</code> call in <code>do_read()</code> until the write operation has completed.\n  This applies across event handlers, tabs, or workers.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">do_write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my_resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'exclusive'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">lock</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Write code here.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"ifAvailable_Example","title":"ifAvailable Example","isH3":true,"content":"<p>\n  To grab a lock only if it isn't already being held, use the <code>ifAvailable</code> option.\n  In this function <code>await</code> means the method will not return until the callback is complete.\n  Since the lock is only granted if it was available, this call avoids needing to wait on the lock being released elsewhere.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my_resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">ifAvailable</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">lock</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>lock<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The lock was not granted - get out fast.</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// The lock was granted, and no other running code in this origin is holding</span>\n  <span class=\"token comment\">// the 'my_res_lock' lock until this returns.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"signal_Example","title":"signal Example","isH3":true,"content":"<p>To only wait for a lock for a short period of time, use the <code>signal</code> option.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> controller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AbortController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Wait at most 200ms.</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> controller<span class=\"token punctuation\">.</span><span class=\"token function\">abort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my_resource'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">signal</span><span class=\"token operator\">:</span> controller<span class=\"token punctuation\">.</span>signal<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">lock</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The lock was acquired!</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">.</span>name <span class=\"token operator\">===</span> <span class=\"token string\">'AbortError'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// The request aborted before it could be granted.</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"Specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/web-locks/#api-lock-manager-request","title":"Web Locks API","shortTitle":"Web Locks API"}],"query":"api.LockManager.request"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"Browser_compatibility","isH3":false,"query":"api.LockManager.request","dataURL":"/en-US/docs/Web/API/LockManager/request/bcd.json"}}],"toc":[{"text":"Syntax","id":"Syntax"},{"text":"Examples","id":"Examples"},{"text":"Specifications","id":"Specifications"},{"text":"Browser compatibility","id":"Browser_compatibility"}],"summary":"The request() method of the LockManager interface requests a Lock object with parameters specifying its name and characteristics.\n  The requested Lock is passed to a callback, while the function itself returns a Promise that resolves with undefined.","popularity":0,"modified":"2022-01-22T00:33:01.000Z","source":{"folder":"en-us/web/api/lockmanager/request","github_url":"https://github.com/mdn/content/blob/main/files/en-us/web/api/lockmanager/request/index.md","last_commit_url":"https://github.com/mdn/content/commit/f1fc79652a89d34a311948238580f2459f0e357d","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/LockManager","title":"LockManager"},{"uri":"/en-US/docs/Web/API/LockManager/request","title":"LockManager.request()"}],"pageTitle":"LockManager.request() - Web APIs | MDN","noIndexing":false}}</script>
<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/LockManager/request by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Jan 2022 17:15:53 GMT -->
</body></html>